<!DOCTYPE html>
        <html lang="es">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Control por HTTP</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
            <style>
                html, body {
                    height: 100%;
                    min-height: 100vh; /* Asegura que ocupe al menos el 100% del viewport */
                    margin: 0;
                    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
                    background-color: #000000; /* Totalmente negro */
                    color: #e0e0e0; /* Texto claro */
                }
                .container {
                    display: flex;
                    flex-direction: column;
                    background: #000000; /* Contenedor más oscuro, pero no negro puro */
                    padding: 1.5rem;
                    width: 100%;
                    height: 100%;
                    box-sizing: border-box;
                    border-radius: 0;
                    box-shadow: none;
                }
                form {
                    display: flex;
                    flex-direction: column;
                    flex-grow: 1;
                }
                .main-content-wrapper {
                    display: flex;
                    flex-grow: 1;
                    gap: 1rem;
                    flex-direction: row;
                }
                @media (max-width: 768px) {
                    .main-content-wrapper {
                        flex-direction: column;
                    }
                }
                textarea {
                    width: 100%;
                    flex-grow: 1;
                    height: auto;
                    margin-bottom: 0;
                    padding: 1rem;
                    border: 1px solid #444; /* Borde más oscuro */
                    border-radius: 8px;
                    font-size: 1.2rem;
                    box-sizing: border-box;
                    resize: none;
                    background-color: #1a1a1a; /* Fondo oscuro restaurado */
                    color: #e0e0e0; /* Texto claro restaurado */
                }
                .button-group {
                    display: flex;
                    flex-direction: column;
                    gap: 1rem;
                    flex-shrink: 0;
                    justify-content: flex-start;
                }
                .button-group button {
                    padding: 1.2rem;
                    font-size: 1.3rem;
                    font-weight: bold;
                    color: #fff;
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: background-color 0.2s;
                }
                .send-btn { background-color: #1a1a1a; color: #e0e0e0; }
                .send-enter-btn { background-color: #1a1a1a; color: #e0e0e0; }
                .send-btn:hover { background-color: #2a2a2a; }
                .send-enter-btn:hover { background-color: #2a2a2a; }

                .fullscreen-btn {
                    width: 100%;
                    padding: 1.2rem;
                    font-size: 1.3rem;
                    font-weight: bold;
                    color: #e0e0e0;
                    background-color: #0056b3; /* Color para entrar */
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: background-color 0.2s;
                    margin-top: 1rem; /* Espacio de los otros botones */
                }
                .fullscreen-btn:hover {
                    background-color: #004085;
                }
            </style>
        </head>
        <body onload="document.getElementById('text_area').focus();">
            <div class="container">
                <form action="/" method="POST">
                    <div class="main-content-wrapper">
                        <textarea name="text_to_type"  id="text_area" inputmode="search"  placeholder="Escribe o pega aquí..."></textarea>
                        <div class="button-group">
                            <button type="submit" name="action" value="send_with_enter" class="send-enter-btn">Enviar Con Enter</button>
                            <button type="submit" name="action" value="send" class="send-btn">Enviar</button>
                            <button type="button" id="fullscreen-toggle-btn" class="send-enter-btn">Entrar a Pantalla Completa</button>
                        </div>
                    </div>
                </form>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
            <script>
                let wakeLock = null;

                const requestWakeLock = async () => {
                    try {
                        wakeLock = await navigator.wakeLock.request('screen');
                        console.log('Wake Lock activado!');
                        wakeLock.addEventListener('release', () => {
                            console.log('Wake Lock liberado!');
                        });
                    } catch (err) {
                        console.error(`${err.name}, ${err.message}`);
                    }
                };

                // Solicitar Wake Lock cuando la página esté visible
                document.addEventListener('visibilitychange', () => {
                    if (wakeLock !== null && document.visibilityState === 'hidden') {
                        wakeLock.release();
                        wakeLock = null;
                    }
                    if (wakeLock === null && document.visibilityState === 'visible') {
                        requestWakeLock();
                    }
                });

                // Solicitar Wake Lock al cargar la página
                window.addEventListener('load', () => {
                    requestWakeLock();
                });

                // --- Lógica de Pantalla Completa ---
                const fullscreenToggleBtn = document.getElementById('fullscreen-toggle-btn');

                const toggleFullscreen = () => {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().catch(err => {
                            console.error(`Error al intentar entrar a pantalla completa: ${err.message} (${err.name})`);
                        });
                    } else {
                        document.exitFullscreen();
                    }
                };

                const updateFullscreenButton = () => {
                    if (document.fullscreenElement) {
                        fullscreenToggleBtn.textContent = 'Salir de Pantalla Completa';
                        fullscreenToggleBtn.style.backgroundColor = '#1a1a1a'; // #dc3545'; // Rojo para salir
                     /* Fondo oscuro restaurado */
                    } else {
                        fullscreenToggleBtn.textContent = 'Entrar a Pantalla Completa';
                        fullscreenToggleBtn.style.backgroundColor = '#1a1a1a';//#0056b3'; // Azul para entrar
                    }
                };

                fullscreenToggleBtn.addEventListener('click', toggleFullscreen);
                document.addEventListener('fullscreenchange', updateFullscreenButton);

                // Actualización inicial del botón
                updateFullscreenButton();
            </script>
        </body>
